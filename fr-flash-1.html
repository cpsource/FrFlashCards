<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Nommez cette Image</title>
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
  >
  <!-- lesanimaux session management -->
  <script src="lesanimaux/lesanimaux.js"></script>
  <style>
    #englishTranslation {
      display: none;
    }
  </style>
</head>
<body class="bg-light">
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card shadow-sm border-0">
          <div class="card-body">
            <h1 class="card-title text-center mb-4">Nommez cette Image</h1>

            <p>Bienvenue sur le site d'étude de vocabulaire français de Cal.</p>
            <p>Des recherches ont montré qu'il ne faut jamais apprendre un mot français en le traduisant d'abord en anglais, puis dans l'autre sens. Cela prend trop de temps — vous ne pourriez jamais suivre une conversation ainsi.</p>
            <p>Il vaut mieux associer directement une image au mot français, sans passer par la traduction anglaise. Ce site fonctionne ainsi : vous voyez une image, dites le mot français, puis cliquez sur le bouton pour vérifier votre réponse et sur <em>Suivant</em> pour continuer.</p>

            <hr class="my-4">

            <div class="text-center mb-3">
              <button id="toggleEnglish" class="btn btn-info">Click for English Translation</button>
            </div>

            <div id="englishTranslation">
              <h5 class="text-center mb-3">English Translation</h5>
              <p><strong>Welcome to Cal's French vocabulary study website.</strong></p>
              <p>Research has shown that you should never learn a French word by translating it into English and then back again. This takes so much time that you will never be able to keep up with a conversation.</p>
              <p>Instead, you should learn to associate an image of an object with the French word and skip the English translation entirely. This website does exactly that: you see a picture and say the French word. Then click the button to test your response, and finally click <em>Next</em>.</p>
            </div>

            <hr class="my-4">

            <div class="text-center">
              <a href="lesanimaux/tst-1.html" class="btn btn-primary btn-lg">Commencer</a>
            </div>

            <hr class="my-4">

            <div class="text-center">
              <button id="resetSession" class="btn btn-warning btn-lg">Réinitialiser la Session</button>
              <p class="text-muted mt-2 small">Cliquez ici pour effacer votre progression et recommencer</p>
            </div>

            <hr class="my-4">

            <div class="text-center">
              <a href="texts/practice-texts.html" class="btn btn-secondary btn-lg">Pratiquer avec des Textes</a>
            </div>

            <hr class="my-4">
	    
	    <div class="text-center">
              <a href="hints/hints.html" class="btn btn-secondary btn-lg">Helpful Hints</a>
            </div>

            <hr class="my-4">
	    
	    <div class="text-center">
              <a href="learn-your-verbs/top.html" class="btn btn-secondary btn-lg">Pratique des Verbes A1</a>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Configuration
    var MAX_PAGES = 100; // Set this to your actual number of pages
    
    // Toggle English translation
    document.getElementById('toggleEnglish').addEventListener('click', function() {
      var translation = document.getElementById('englishTranslation');
      if (translation.style.display === 'none') {
        translation.style.display = 'block';
        this.textContent = 'Hide English Translation';
      } else {
        translation.style.display = 'none';
        this.textContent = 'Click for English Translation';
      }
    });
    
    // Initialize session and setup smart navigation
    document.addEventListener('DOMContentLoaded', function() {
      // Create session if it doesn't exist
      if (typeof create_session === 'function') {
        create_session();
        console.log('Session initialized');
      }
      
      // Reset session button
      var resetBtn = document.getElementById('resetSession');
      if (resetBtn && typeof reset_session === 'function') {
        resetBtn.addEventListener('click', function() {
          if (confirm('Êtes-vous sûr de vouloir réinitialiser votre progression ? Toutes les pages marquées comme "facile" seront effacées.')) {
            reset_session();
            alert('Session réinitialisée ! Vous pouvez recommencer depuis le début.');
            // Optionally reload the page to reflect the reset
            window.location.reload();
          }
        });
      }
      
      // Update "Commencer" button to go to first non-easy page
      var commencerBtn = document.querySelector('a[href="lesanimaux/tst-1.html"]');
      if (commencerBtn && typeof next_page === 'function') {
        commencerBtn.addEventListener('click', function(e) {
          e.preventDefault(); // Prevent default navigation
          
          // Find first non-easy page starting from page 0
          var firstPage = next_page(0, MAX_PAGES);
          
          if (firstPage === null) {
            // All pages are easy!
            alert('Félicitations! Toutes les pages sont marquées comme faciles!');
          } else {
            // Navigate to first non-easy page
            window.location.href = 'lesanimaux/tst-' + firstPage + '.html';
          }
        });
      }
    });
  </script>
</body>
</html>
