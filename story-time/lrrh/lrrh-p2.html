<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>L’heure du conte — L’histoire du Petit Chaperon rouge (page 2)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap v4 -->
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-MEVo3mHlmLxgqH96ZZtDcEoxz2X1rplPQdkN2vRC7czQvO3hRHRZtA95vM5m6tgi"
          crossorigin="anonymous">

    <style>
      body {
        background-color: #fffdfd;
        color: #222;
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      }
      .story-container {
        max-width: 820px;
        margin: 2rem auto;
        text-align: center;
      }
      h1 {
        font-size: 2.4rem;
        color: #8b0000;
        margin-bottom: 0.25rem;
      }
      h2 {
        font-weight: 500;
        color: #666;
        margin-bottom: 1.25rem;
      }
      .story {
        text-align: left;
        font-size: 1.15rem;
      }
      .gloss {
        border-bottom: 2px solid #8b0000;
        text-decoration: none;
        cursor: pointer;
        position: relative;
      }
      .gloss[data-en]:hover::after {
        content: attr(data-en);
        position: absolute;
        left: 0;
        top: 100%;
        margin-top: .35rem;
        white-space: nowrap;
        background: #111;
        color: #fff;
        padding: .35rem .6rem;
        border-radius: .35rem;
        font-size: .9rem;
        z-index: 10;
      }
      audio { width: 100%; margin-top: 1rem; }
      .controls { margin-top: 1.25rem; }
      .footer-link { margin-top: 1.25rem; }
    </style>
  </head>
  <body>
    <div class="story-container">
      <h1>L’heure du conte</h1>
      <img src="wolf.png" alt="Le loup déguisé" class="img-fluid mb-3" style="max-width:300px;">
      <h2>L’histoire du Petit Chaperon rouge — page 2</h2>

      <div class="story">
        <p>
          <span class="gloss" data-en="Little Red Riding Hood sees her grandmother"
                data-audio="lrrh2_voit_grand_mere.mp3">Le Petit Chaperon rouge voit sa grand-mère</span>
          et <span class="gloss" data-en="says (present)" data-audio="lrrh2_dit.mp3">dit</span> :
          « <span class="gloss" data-en="what big eyes you have"
                data-audio="lrrh2_quels_grands_yeux.mp3">quels grands yeux tu as</span> ! »
        </p>

        <p>
          Le loup <span class="gloss" data-en="replies (present)" data-audio="lrrh2_repond.mp3">répond</span> :
          « <span class="gloss" data-en="all the better to see you with"
                data-audio="lrrh2_cest_pour_mieux_te_voir.mp3">C’est pour mieux te voir</span>. »
        </p>

        <p>
          Puis elle <span class="gloss" data-en="says (present)" data-audio="lrrh2_dit2.mp3">dit</span> :
          « <span class="gloss" data-en="what big teeth you have"
                data-audio="lrrh2_quelles_grandes_dents.mp3">quelles grandes dents tu as</span> ! »
        </p>

        <p>
          Et là, <span class="gloss" data-en="the wolf jumped from the bed (passé composé)"
                 data-audio="lrrh2_le_loup_a_saute_du_lit.mp3">le loup a sauté du lit</span>.
          Le Petit Chaperon rouge <span class="gloss" data-en="took the knife from the basket (passé composé)"
                 data-audio="lrrh2_elle_a_pris_le_couteau.mp3">a pris le couteau du panier</span>
          et <span class="gloss" data-en="killed the wolf (passé composé)"
                 data-audio="lrrh2_a_tue_le_loup.mp3">a tué le loup</span>.
        </p>

        <p>
          <span class="gloss" data-en="The end"
                data-audio="lrrh2_fin.mp3">Fin</span>.
        </p>
      </div>

      <audio id="player" controls preload="auto" src="lrrh_p2_full.mp3"></audio>

      <div class="controls">
        <label for="speed">Vitesse :</label>
        <input id="speed" type="range" min="0.6" max="1.4" step="0.05" value="1.0">
        <span id="speedVal">1.00×</span>
        <button id="repeatBtn" class="btn btn-outline-secondary btn-sm ml-2">Répéter</button>
      </div>

      <div class="footer-link">
        <a class="btn btn-primary btn-sm" href="lrrh-p1.html">Retour à l’accueil</a>
      </div>
    </div>

    <script>
      const player = document.getElementById('player');
      const speed = document.getElementById('speed');
      const speedVal = document.getElementById('speedVal');
      const repeatBtn = document.getElementById('repeatBtn');

      speed.addEventListener('input', () => {
        const v = parseFloat(speed.value);
        player.playbackRate = v;
        speedVal.textContent = v.toFixed(2) + '×';
      });
      repeatBtn.addEventListener('click', () => {
        player.currentTime = 0;
        player.play();
      });

      // Hover phrase audio
      let hoverAudio = null;
      function playHover(src, rate) {
        try {
          if (hoverAudio) { hoverAudio.pause(); hoverAudio = null; }
          hoverAudio = new Audio(src);
          hoverAudio.playbackRate = rate || 1.0;
          hoverAudio.play().catch(() => {});
        } catch(e) {}
      }
      document.querySelectorAll('.gloss').forEach(node => {
        node.addEventListener('mouseenter', () => {
          const file = node.getAttribute('data-audio');
          if (!file) return;
          const rate = parseFloat(speed.value || '1') || 1;
          playHover(file, rate);
        });
      });
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-LtrjvnR4Twt/qOuYxV0t2tUHZhbz9N2CblxR+7dUVF0QK3Zo2mtnV+8nhDkYvj8D"
            crossorigin="anonymous"></script>
  </body>
</html>

